<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Particle Playground - Charlie Sands</title>
    <style>
        body {
            font-family: Georgia, 'Times New Roman', serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 48px 24px;
            background: #fff;
            color: #111;
            line-height: 1.6;
        }

        h1 {
            font-size: 2em;
            margin-bottom: 0.5em;
            color: #111;
        }

        a {
            color: #2b59ff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 24px;
            font-size: 0.9em;
        }

        #canvas {
            display: block;
            border: 2px solid #e0e0e0;
            border-radius: 4px;
            cursor: crosshair;
            margin: 24px 0;
            background: #000;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 24px;
            align-items: center;
        }

        button {
            padding: 10px 20px;
            background: #2b59ff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: inherit;
            font-size: 14px;
            transition: background 0.2s;
        }

        button:hover {
            background: #1a3fcc;
        }

        button.active {
            background: #ff5722;
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .mode-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        input[type="range"] {
            width: 120px;
        }

        .info {
            background: #f5f5f5;
            padding: 16px;
            border-radius: 4px;
            font-size: 0.9em;
            margin-top: 24px;
        }

        .stats {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #666;
        }

        label {
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
        }

        input[type="checkbox"] {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Home</a>

    <h1>Particle Playground</h1>
    <p>Move your mouse over the canvas to create particles. Try different modes!</p>

    <div class="controls">
        <div class="mode-buttons">
            <button id="mode-fireworks" class="mode-btn active">üéÜ Fireworks</button>
            <button id="mode-gravity" class="mode-btn">üåç Gravity</button>
            <button id="mode-orbit" class="mode-btn">üåÄ Orbit</button>
            <button id="mode-paint" class="mode-btn">üé® Paint</button>
            <button id="mode-chaos" class="mode-btn">‚ú® Chaos</button>
            <button id="mode-ripple" class="mode-btn">„Ä∞Ô∏è Ripple</button>
        </div>
        <button id="clear">Clear</button>
        <label>
            <input type="checkbox" id="sound-toggle" checked>
            Sound
        </label>
    </div>

    <canvas id="canvas" width="800" height="500"></canvas>

    <div class="stats">
        Particles: <span id="particle-count">0</span> | FPS: <span id="fps">60</span>
    </div>

    <div class="info">
        <strong>Modes:</strong>
        <ul>
            <li><strong>Fireworks:</strong> Explosive particles that shoot upward and burst</li>
            <li><strong>Gravity:</strong> Particles fall and bounce with realistic physics</li>
            <li><strong>Orbit:</strong> Particles orbit around your cursor</li>
            <li><strong>Paint:</strong> Create smooth, flowing trails of color</li>
            <li><strong>Chaos:</strong> Random chaotic motion with particle collisions</li>
            <li><strong>Ripple:</strong> Wave-like patterns emanating from your cursor</li>
        </ul>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const particles = [];
        let mouseX = 0;
        let mouseY = 0;
        let mouseDown = false;
        let currentMode = 'fireworks';
        let soundEnabled = true;
        let frameCount = 0;
        let lastTime = performance.now();
        let fps = 60;

        // Audio context for sound effects
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        class Particle {
            constructor(x, y, mode) {
                this.x = x;
                this.y = y;
                this.mode = mode;
                this.age = 0;
                this.maxAge = Math.random() * 100 + 50;
                this.size = Math.random() * 3 + 2;
                this.color = this.getColor();

                switch(mode) {
                    case 'fireworks':
                        this.vx = (Math.random() - 0.5) * 8;
                        this.vy = -Math.random() * 10 - 5;
                        this.gravity = 0.2;
                        break;
                    case 'gravity':
                        this.vx = (Math.random() - 0.5) * 6;
                        this.vy = (Math.random() - 0.5) * 6;
                        this.gravity = 0.3;
                        this.bounce = 0.7;
                        break;
                    case 'orbit':
                        const angle = Math.random() * Math.PI * 2;
                        const speed = Math.random() * 2 + 1;
                        this.vx = Math.cos(angle) * speed;
                        this.vy = Math.sin(angle) * speed;
                        this.orbitSpeed = 0.05;
                        break;
                    case 'paint':
                        this.vx = (Math.random() - 0.5) * 2;
                        this.vy = (Math.random() - 0.5) * 2;
                        this.friction = 0.95;
                        this.size = Math.random() * 5 + 3;
                        break;
                    case 'chaos':
                        this.vx = (Math.random() - 0.5) * 10;
                        this.vy = (Math.random() - 0.5) * 10;
                        this.rotation = Math.random() * Math.PI * 2;
                        this.rotationSpeed = (Math.random() - 0.5) * 0.2;
                        break;
                    case 'ripple':
                        this.angle = Math.random() * Math.PI * 2;
                        this.distance = 0;
                        this.speed = Math.random() * 3 + 2;
                        this.frequency = Math.random() * 0.1 + 0.05;
                        this.amplitude = Math.random() * 20 + 10;
                        break;
                }
            }

            getColor() {
                const colors = [
                    '#2b59ff', '#ff5722', '#4CAF50', '#FFC107',
                    '#9C27B0', '#00BCD4', '#FF4081', '#CDDC39'
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                this.age++;

                switch(this.mode) {
                    case 'fireworks':
                        this.vy += this.gravity;
                        this.x += this.vx;
                        this.y += this.vy;
                        this.vx *= 0.99;
                        break;

                    case 'gravity':
                        this.vy += this.gravity;
                        this.x += this.vx;
                        this.y += this.vy;

                        if (this.y > canvas.height - this.size) {
                            this.y = canvas.height - this.size;
                            this.vy *= -this.bounce;
                            this.vx *= 0.9;
                        }
                        if (this.x < this.size || this.x > canvas.width - this.size) {
                            this.vx *= -1;
                            this.x = Math.max(this.size, Math.min(canvas.width - this.size, this.x));
                        }
                        break;

                    case 'orbit':
                        const dx = mouseX - this.x;
                        const dy = mouseY - this.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);

                        if (dist > 1) {
                            const force = 0.5;
                            this.vx += (dx / dist) * force;
                            this.vy += (dy / dist) * force;

                            const perpX = -dy / dist;
                            const perpY = dx / dist;
                            this.vx += perpX * 2;
                            this.vy += perpY * 2;
                        }

                        this.vx *= 0.95;
                        this.vy *= 0.95;
                        this.x += this.vx;
                        this.y += this.vy;
                        break;

                    case 'paint':
                        this.vx *= this.friction;
                        this.vy *= this.friction;
                        this.x += this.vx;
                        this.y += this.vy;
                        break;

                    case 'chaos':
                        this.rotation += this.rotationSpeed;
                        this.vx += (Math.random() - 0.5) * 0.5;
                        this.vy += (Math.random() - 0.5) * 0.5;
                        this.vx *= 0.98;
                        this.vy *= 0.98;
                        this.x += this.vx;
                        this.y += this.vy;

                        if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                        if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
                        break;

                    case 'ripple':
                        this.distance += this.speed;
                        const wave = Math.sin(this.distance * this.frequency) * this.amplitude;
                        this.x = mouseX + Math.cos(this.angle) * this.distance + Math.cos(this.angle) * wave;
                        this.y = mouseY + Math.sin(this.angle) * this.distance + Math.sin(this.angle) * wave;
                        break;
                }

                return this.age < this.maxAge &&
                       this.x >= -10 && this.x <= canvas.width + 10 &&
                       this.y >= -10 && this.y <= canvas.height + 10;
            }

            draw() {
                const alpha = 1 - (this.age / this.maxAge);
                ctx.fillStyle = this.color;
                ctx.globalAlpha = alpha;

                if (this.mode === 'chaos') {
                    ctx.save();
                    ctx.translate(this.x, this.y);
                    ctx.rotate(this.rotation);
                    ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size);
                    ctx.restore();
                } else {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.globalAlpha = 1;
            }
        }

        function playSound(frequency) {
            if (!soundEnabled) return;

            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.value = frequency;
            oscillator.type = 'sine';

            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        function createParticles(x, y, count = 5) {
            for (let i = 0; i < count; i++) {
                particles.push(new Particle(x, y, currentMode));
            }

            // Play a note based on vertical position
            const freq = 200 + (1 - y / canvas.height) * 600;
            playSound(freq);
        }

        function animate() {
            frameCount++;
            const currentTime = performance.now();
            if (currentTime - lastTime >= 1000) {
                fps = Math.round(frameCount * 1000 / (currentTime - lastTime));
                frameCount = 0;
                lastTime = currentTime;
                document.getElementById('fps').textContent = fps;
            }

            // Fade effect instead of clear
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Update and draw particles
            for (let i = particles.length - 1; i >= 0; i--) {
                if (particles[i].update()) {
                    particles[i].draw();
                } else {
                    particles.splice(i, 1);
                }
            }

            document.getElementById('particle-count').textContent = particles.length;
            requestAnimationFrame(animate);
        }

        // Event listeners
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;

            if (mouseDown || currentMode === 'paint' || currentMode === 'ripple') {
                createParticles(mouseX, mouseY, currentMode === 'paint' ? 3 : 2);
            }
        });

        canvas.addEventListener('mousedown', (e) => {
            mouseDown = true;
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
            createParticles(mouseX, mouseY, 10);
        });

        canvas.addEventListener('mouseup', () => {
            mouseDown = false;
        });

        canvas.addEventListener('mouseleave', () => {
            mouseDown = false;
        });

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            createParticles(x, y, currentMode === 'fireworks' ? 30 : 15);
        });

        // Mode buttons
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentMode = btn.id.replace('mode-', '');
            });
        });

        document.getElementById('clear').addEventListener('click', () => {
            particles.length = 0;
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        });

        document.getElementById('sound-toggle').addEventListener('change', (e) => {
            soundEnabled = e.target.checked;
        });

        // Initial clear
        ctx.fillStyle = '#000';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Start animation
        animate();
    </script>
</body>
</html>
